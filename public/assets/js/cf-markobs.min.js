function MarkObsTestController(a,b,c){var d;d=this,d.debug="If you can see this, then MarkObsTestController is working :-)",d.html="",d.markob={},b.previewCode={html:"<h1>the previewCode</h1>"},b.$watch("moCtrl.markob",function(a,b){d.html=c.trustAsHtml(d.generateHtmlCode())},!0),this.changeVar=function(){d.markob.value=d.getRandomArbitrary(1,100)},this.getRandomArbitrary=function(a,b){return Math.floor(Math.random()*(b-a)+a)},this.generateHtmlCode=function(){var a=document.createElement("div");if("undefined"!=typeof d.markob&&"undefined"!=typeof d.markob.items)for(var b in d.markob.items)if(d.markob.items.hasOwnProperty(b)){var c=d.markob.items[b],e=this.processItem(c);a.appendChild(e)}console.log("doc : ",a);for(var f,g=document.createNodeIterator(a,NodeFilter.SHOW_ELEMENT),h=0,i="";f=g.nextNode();)console.log(f.nodeName),h>0&&(i+=this.tagToHtml(f)+"\n"),h++;return i},this.processItem=function(a){var b=null;switch(a.type){case"heading":var c="h3";"undefined"!=typeof a.rank&&a.rank>=1&&a.rank<=6&&(c="h"+a.rank),b=document.createElement(c);var d=document.createTextNode(a.content);b.appendChild(d);break;case"text":b=document.createElement("p");var d=document.createTextNode(a.content);b.appendChild(d);break;case"list":if(b="ordered"==a.flavour?document.createElement("ol"):document.createElement("ul"),"undefined"!=typeof a.items)for(var e in a.items)a.items.hasOwnProperty(e)&&b.appendChild(this.processItem(a.items[e]));break;case"list-item":b=document.createElement("li");var d=document.createTextNode(a.content);b.appendChild(d);break;case"image":b=document.createElement("image")}if("undefined"!=typeof b&&null!=b&&"undefined"!=typeof a.attributes&&Object.keys(a.attributes).length>0)for(var e in a.attributes)a.attributes.hasOwnProperty(e)&&b.setAttribute(e,a.attributes[e]);return b},this.tagToHtml=function(a,b){var c="";if("undefined"==typeof a||null==a)return c;var d=document.createElement("div");if(("undefined"==typeof b||null==b)&&(b=0),"undefined"!=typeof b&&b>0)for(var e=0;b>e;e++)c+="	";return"undefined"!=typeof a&&null!=a&&d.appendChild(a),c+=d.innerHTML},this.setContent=function(a){switch(a){case"lorem":d.markob={meta:{},items:[{type:"heading",rank:1,content:"Lorem Ipsum",attributes:{"class":"heading"}},{type:"text",content:"Quisque quis mollis tellus. Proin aliquam tellus vel nisl vestibulum pharetra. Ut aliquam turpis et tempor convallis. Donec ut enim in ligula efficitur faucibus in at massa. Suspendisse potenti. Aenean mattis arcu sit amet erat tempus"},{type:"list",flavour:"unordered",items:[{type:"list-item",content:"Sed eget suscipit sem"},{type:"list-item",content:"Etiam eleifend sodales porttitor"},{type:"list-item",content:"Pellentesque dictum porttitor nisl"}]},{type:"text",content:"Suspendisse et vestibulum ex. Integer lacinia erat sed magna commodo, eget fringilla ipsum tempus. Suspendisse potenti. Fusce aliquet ultrices interdum."},{type:"image",attributes:{src:"http://placehold.it/500x250",alt:"placeholder image","class":"th"}},{type:"text",content:"Morbi rhoncus justo sed dolor luctus, eu ornare nunc sollicitudin. Praesent porttitor rhoncus massa, nec finibus nibh volutpat quis."},{type:"heading",rank:2,content:"Morbi vulputate, ipsum et malesuada suscipit",attributes:{"class":"heading"}},{type:"text",content:"Mauris rhoncus molestie ipsum, vitae blandit ante consequat egestas. Praesent nec nibh a velit pretium faucibus. Aenean aliquam vestibulum nibh, eget dapibus nunc maximus at. Donec auctor consequat ligula, eget imperdiet erat venenatis non. Maecenas rhoncus mi ex, et pretium erat malesuada ac. Aliquam sapien sapien, rhoncus id auctor sit amet, mollis vel justo. Integer posuere scelerisque arcu, ut mattis elit rutrum ut. In quis diam sapien."}]};break;default:d.markob={}}},this.setContent("lorem")}function CodeHighlighterDirective(a,b){return{restrict:"E",scope:!0,compile:function(b,c){var d=a(b.html(),!0);return b.html(""),function(a,b,c){a.$watch(d,function(a){"html"==c["class"]?a=html_beautify(a,{indent_inner_html:!0,indent_size:4,indent_char:" ",wrap_line_length:0,brace_style:"expand",unformatted:["a","sub","sup","b","i","u"],preserve_newlines:!1,max_preserve_newlines:2,indent_handlebars:!1,extra_liners:["/html"]}):"json"==c["class"]&&(a=js_beautify(a,{indent_size:4,indent_char:" ",preserve_newlines:!0,max_preserve_newlines:2}));var d=hljs.highlightAuto(a),e=d.value;console.log("attrs : ",c),b.html(e)})}}}}angular.module("cf-markobs",["cf-templates"]).controller("MarkObsTestController",MarkObsTestController).directive("prettyCode",CodeHighlighterDirective),MarkObsTestController.$inject=["$window","$scope","$sce"],CodeHighlighterDirective.$inject=["$interpolate","$window"],angular.module("cf-templates",[]);